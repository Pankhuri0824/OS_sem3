The code has 7 semaphores. The code is optimized to avoid deadlines. The codes runs infinite times as specified.